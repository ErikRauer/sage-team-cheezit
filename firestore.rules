service cloud.firestore {
  match /databases/{database}/documents {
    //match /{document=**} {
    //  allow read, write;
    //}
    match /decks/{deck=**} {
    	allow read: if resource.data.public || request.auth.uid in resource.data.users;
      allow list: if resource.data.public || request.auth != null; //temporary, there is a bug in firebase
      //that causes queries to fail with certain permission setups (https://stackoverflow.com/questions/46667912).
      //This should be removed after that is fixed, leaving only the read perm.


      //match /cards/{card} {
      //	allow read, write;
      //}
    }
  }
}
